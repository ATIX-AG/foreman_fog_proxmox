<%# Copyright 2018 Tristan Robert

This file is part of ForemanProxmox.

ForemanProxmox is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

ForemanProxmox is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with ForemanProxmox. If not, see <http://www.gnu.org/licenses/>. %>

<%= text_f f, :url, :help_block => _("e.g. https://127.0.0.1:8006/api2/json") %>
<%= text_f f, :user , :help_block => _("e.g. root@pam") %>
<%= password_f f, :password, :keep_value => true, :unset => unset_password? %>

<% hypervisor = f.object.hypervisor.uuid rescue nil %>
<% if hypervisor -%>
    <%= f.hidden_field :uuid, :value => hypervisor %>
<% end -%>
<%= link_to_function _("Test Connection"), "testConnection(this)", :class => "btn + #{hypervisor.nil? ? "btn-default" : "btn-success"}", :'data-url' => test_connection_compute_resources_path %>

<%= hidden_spinner('', :id => 'test_connection_indicator') %>